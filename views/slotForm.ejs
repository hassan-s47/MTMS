<!DOCTYPE html>
<html>
<head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
        <title>Admiry - Responsive Flat Admin Dashboard</title>
        <meta content="Admin Dashboard" name="description" />
        <meta content="ThemeDesign" name="author" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />

        <link rel="shortcut icon" href="/assets/images/favicon.ico">

        <!--Morris Chart CSS -->
        <link rel="stylesheet" href="/assets/plugins/morris/morris.css">

        <link href="/assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">
        <link href="/assets/css/icons.css" rel="stylesheet" type="text/css">
        <link href="/assets/css/style.css" rel="stylesheet" type="text/css">
      
    </head>


    <body class="fixed-left">

        <!-- Loader -->
        <div id="preloader"><div id="status"><div class="spinner"></div></div></div>

        <!-- Begin page -->
        <div id="wrapper">

            <!-- ========== Left Sidebar Start ========== -->
         
            <!-- Left Sidebar End -->

            <!-- Start right Content here -->

            <div class="container" style="background-color: #f0f1f5; border: 1px solid #f0f1f5;">
                <!-- Start content -->
                <div class="content">

                    <!-- Top Bar Start -->
                    <div class="topbar">

                        <nav class="navbar-custom">

                           

<ul class="list-inline menu-left mb-0" style="width:100%">
  
    <li class="hide-phone list-inline-item app-search" >
        <h3 class="page-title">Availability Request</h3>
    </li>
</ul>

<div class="clearfix"></div>

</nav>

</div>
                    <div class="page-content-wrapper ">

                        <div class="container-fluid">
                         

                                <div class="row">

                                    <div class="col-md-2"></div>
                                    <div class="col-md-8">
                                        <H3>Select Available Slot</H3>
                                        <form action="/saveStudentSlot" method="Post">
                                            <div class="form-group row">
                                                <input type="hidden" value="<%=classID%>" required name="classID" id="classID">
                                                <label class="col-sm-2 col-form-label">Select Day</label>
                                                <div class="col-sm-10">
                                                    <select class="form-control" name="day" id="day" required>
                                                        <option disabled selected>Select</option>
                                                        <option value="Monday">Monday</option>
                                                        <option value="Tuesday">Tuesday</option>
                                                        <option value="Wednesday">Wednesday</option>
                                                        <option value="Thursday">Thursday</option>
                                                        <option value="Friday">Friday</option>
                                                        <option value="Saturday">Saturday</option>
                                                        <option value="Sunday">Sunday</option>
                                                        
                                                    </select>
                                                </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label for="example-date-input"class="col-sm-2 col-form-label">Start Time</label>
                                                    <div class="col-sm-10">
                                                        <input class="form-control" type="time" name="startTime"  id="startTime" required  onchange="hideShow()">
                                                    </div>
                                                </div>
                                                <input type="hidden" name="studentID" value="<%= id %>" >
                                                <div class="form-group row">
                                                    <label for="example-date-input"class="col-sm-2 col-form-label">End Time</label>
                                                    <div class="col-sm-10">
                                                        <input class="form-control" type="time" name="endTime"  id="endTime" required onchange="hideShow()" >
                                                    </div>
                                                </div>
                                                <div class="form-group text-center row m-t-20">
                                                    <div class="col-12">
                                                        <button id ="addSlot" class="btn btn-primary btn-block waves-effect waves-light" type="submit">Submit Response</button>
                                                        <button id ="verifySlot" class="btn btn-success btn-block waves-effect waves-light" type="button">Verify</button>
     
                                                    </div>
                                                </div>
                                        </form>

                                    </div>
                                    <div class="col-md-2">
                                        
                                    </div>

                                </div>

                                <table  id="tech-companies-1" class="table  table-striped">
                                    <thead>
                                        <tr>
                                        <th colspan="3" style="text-align: center;background-color: black; color: honeydew;">
                                            Monday
                                        </th>
                                    </tr>
                                    </thead>
                                    <tr style="font-weight: bold;">
                                        <td >
Start Time
                                        </td>
                                        <td>
End Time
                                        </td>
                                        <td>
Status
                                        </td>
                                    </tr>
                                    <tbody>
                                        <%
                                        weekData.Monday.forEach(function(slot) { 
                                          %> 
                                        <tr>
                                            <td>
    <%= slot.startTime%>
                                            </td>
                                            <td>
                                                <%= slot.endTime%>
                                            </td>
                                            <td>
                                                <%= slot.status%>
                                            </td>
                                        </tr>
                                        <% }) %> 
                                    </tbody>
                                    <thead>
                                        <tr>
                                        <th colspan="3" style="text-align: center;background-color: black; color: honeydew;">
                                            Tuesday
                                        </th>
                                    </tr>
                                    </thead>
                                    <tr style="font-weight: bold;">
                                        <td >
Start Time
                                        </td>
                                        <td>
End Time
                                        </td>
                                        <td>
Status
                                        </td>
                                    </tr>
                                    <tbody>
                                     
                                        <%
                                        weekData.Tuesday.forEach(function(slot) { 
                                          %> 
                                        <tr>
                                            <td>
    <%= slot.startTime%>
                                            </td>
                                            <td>
                                                <%= slot.endTime%>
                                            </td>
                                            <td>
                                                <%= slot.status%>
                                            </td>
                                        </tr>
                                        <% }) %> 

                                    </tbody>
                                    <thead>
                                        <tr>
                                        <th colspan="3" style="text-align: center;background-color: black; color: honeydew;">
                                            Wednesday
                                        </th>
                                    </tr>
                                    </thead>
                                    <tr style="font-weight: bold;">
                                        <td >
Start Time
                                        </td>
                                        <td>
End Time
                                        </td>
                                        <td>
Status
                                        </td>
                                    </tr>
                                    <tbody>
                                     
                                        <%
                                        weekData.Wednesday.forEach(function(slot) { 
                                          %> 
                                        <tr>
                                            <td>
    <%= slot.startTime%>
                                            </td>
                                            <td>
                                                <%= slot.endTime%>
                                            </td>
                                            <td>
                                                <%= slot.status%>
                                            </td>
                                        </tr>
                                        <% }) %> 

                                    </tbody>
                                    <thead>
                                        <tr>
                                        <th colspan="3" style="text-align: center;background-color: black; color: honeydew;">
                                            Thursday
                                        </th>
                                    </tr>
                                    </thead>
                                    <tr style="font-weight: bold;">
                                        <td >
Start Time
                                        </td>
                                        <td>
End Time
                                        </td>
                                        <td>
Status
                                        </td>
                                    </tr>
                                    <tbody>
                                     
                                        <%
                                        weekData.Thursday.forEach(function(slot) { 
                                          %> 
                                        <tr>
                                            <td>
    <%= slot.startTime%>
                                            </td>
                                            <td>
                                                <%= slot.endTime%>
                                            </td>
                                            <td>
                                                <%= slot.status%>
                                            </td>
                                        </tr>
                                        <% }) %> 

                                    </tbody>
                                    <thead>
                                        <tr>
                                        <th colspan="3" style="text-align: center;background-color: black; color: honeydew;">
                                            Friday
                                        </th>
                                    </tr>
                                    </thead>
                                    <tr style="font-weight: bold;">
                                        <td >
Start Time
                                        </td>
                                        <td>
End Time
                                        </td>
                                        <td>
Status
                                        </td>
                                    </tr>
                                    <tbody>
                                     
                                        <%
                                        weekData.Friday.forEach(function(slot) { 
                                          %> 
                                        <tr>
                                            <td>
    <%= slot.startTime%>
                                            </td>
                                            <td>
                                                <%= slot.endTime%>
                                            </td>
                                            <td>
                                                <%= slot.status%>
                                            </td>
                                        </tr>
                                        <% }) %> 
                                    </tbody>
                                    <thead>
                                        <tr>
                                        <th colspan="3" style="text-align: center;background-color: black; color: honeydew;">
                                            Saturday
                                        </th>
                                    </tr>
                                    </thead>
                                    <tr style="font-weight: bold;">
                                        <td >
Start Time
                                        </td>
                                        <td>
End Time
                                        </td>
                                        <td>
Status
                                        </td>
                                    </tr>
                                    <tbody>
                                     
                                        <%
                                        weekData.Saturday.forEach(function(slot) { 
                                          %> 
                                        <tr>
                                            <td>
    <%= slot.startTime%>
                                            </td>
                                            <td>
                                                <%= slot.endTime%>
                                            </td>
                                            <td>
                                                <%= slot.status%>
                                            </td>
                                        </tr>
                                        <% }) %> 
                                    </tbody>
                                    <thead>
                                        <tr>
                                        <th colspan="3" style="text-align: center;background-color: black; color: honeydew;">
                                            Sunday
                                        </th>
                                    </tr>
                                    </thead>
                                    <tr style="font-weight: bold;">
                                        <td >
Start Time
                                        </td>
                                        <td>
End Time
                                        </td>
                                        <td>
Status
                                        </td>
                                    </tr>
                                    <tbody>
                                        <%
                                        weekData.Sunday.forEach(function(slot) { 
                                          %> 
                                        <tr>
                                            <td>
    <%= slot.startTime%>
                                            </td>
                                            <td>
                                                <%= slot.endTime%>
                                            </td>
                                            <td>
                                                <%= slot.status%>
                                            </td>
                                        </tr>
                                        <% }) %> 

                                    </tbody>

                                </table>


                            </div>

                  
                        </div>


                    </div>




<%- include("./footer.ejs") %>



<script>
    function hideShow(){
        document.getElementById('addSlot').style.display='none';
         document.getElementById('msg').display="none";
         document.getElementById('verifySlot').style.display='block';
    }


    document.getElementById('addSlot').style.display='none'
    $('#verifySlot').on('click', function (event) {
    console.log(event);
    event.preventDefault(); // Stop the form from causing a page refresh.
    var data = {
      day: $('#day').val(),
      startTime: $('#startTime').val(),
      endTime:$('#endTime').val(),
      classID:$('#classID').val()
    };
    $.ajax({
      url: '/verifySlot',
      data: data,
      method: 'POST'
    }).then(function (response) {
        

      if(response.status==true)
      {
          document.getElementById('addSlot').style.display="block"
          document.getElementById('verifySlot').style.display="none"
      }
        else
        {
          element= document.getElementById('msg').display="none";
         
        }
      $('body').append(response);
    }).catch(function (err) {
        console.log(err);
    });
    
  });

  
</script>